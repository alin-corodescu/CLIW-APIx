<!DOCTYPE html>
<html>
<script type="text/javascript">

    var drawable_canvas, background_canvas;
    var drawable_canvas_ctx, background_canvas_ctx;


    function initVariables() {
        drawable_canvas = document.getElementById("drawable_canvas");
        drawable_canvas_ctx = drawable_canvas.getContext('2d');

        background_canvas = document.getElementById("background_canvas");
        background_canvas_ctx = background_canvas.getContext('2d');
    }

    function drawUpdate(json) {
        var update = JSON.parse(json);

        if (update.hasOwnProperty('target') && update.target === 'background') {
            var image = new Image();
            image.onload = function (ev) {
                background_canvas_ctx.drawImage(image);
            };
            image.src = update.dataUrl;
            return;
        }


        drawable_canvas_ctx.beginPath();
        drawable_canvas_ctx.moveTo(update.xFrom, update.yFrom);
        drawable_canvas_ctx.lineTo(update.xTo, update.yTo);
        drawable_canvas_ctx.strokeStyle = update.color;
        drawable_canvas_ctx.lineWidth = update.thickness;
        drawable_canvas_ctx.stroke();
        drawable_canvas_ctx.closePath();
    }

    function setCanvasDimensions(width, height) {
        drawable_canvas.width = width;
        drawable_canvas.height = height;

        background_canvas.width = width;
        background_canvas.height = height;
    }

</script>
<head>
    <title>
        Page for testing backend solutions for APIx
    </title>
</head>
<body onload="initVariables()">
<canvas id="drawable_canvas" width="200px" height="200px" style="border: 1px solid black;">
    Hello world!
</canvas>
<canvas id="background_canvas">

</canvas>
</body>
</html>