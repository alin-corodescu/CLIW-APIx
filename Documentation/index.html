<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>APix</title>
    <link rel="stylesheet" href="scholarly.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>
<body prefix="schema: http://schema.org/ xsd: http://www.w3.org/2001/XMLSchema# sa: https://ns.science.ai/">
<header>
    <p class="title">APix</p>
    <p class="subtitle">Documentation & Overview</p>
</header>
<article id="what" typeof="schema:ScholarlyArticle" resource="#">
    <h1>Documentation APix</h1>
    <section>
        <ol>
            <li property="schema:author" typeof="sa:ContributorRole">
                <a property="schema:author" typeof="schema:Person">
                    <span property="schema:givenName">Corodescu</span>
                    <span property="schema:familyName">Alin Andrei, </span>
                </a>
                <a property="schema:author" typeof="schema:Person">
                    <span property="schema:givenName">Humă</span>
                    <span property="schema:familyName">Cristian </span>
                </a>

            </li>
        </ol>
    </section>
    <section typeof="sa:Abstract" id="abstract">
        <h2>Abstract</h2>
        <p>
            APix is a web application that highlights teamwork and mobility in a small simple package,
            to enable users to draw collaboratively on a single canvas. Its working enviroment is a web browser
            (desktop and mobile orientated) but also offers its users to use their phone as a pointer for drawing on the
            canvas via an Android application.
    </section>
    <section typeof="sa:MaterialsAndMethods" id="motivation">
        <h2>Motivation</h2>
        <p>
            Similar applications, even though have a lot of drawing capabilities,
            do not offer support for alternative input devices, like your smart phone.
            We also wanted to offer a more adaptable application, to be able to edit your photos
            on all devices, regarding of their size.
    </section>

    <section typeof="sa:Results" id="definition">
        <h2>Application summary</h2>
        <h4>Web</h4>
        <p>
            APix is a web based application where people can draw together on a web browser, on desktop or mobile,
            which offers multiple functionalities:
        <ul>
            <li>customizable canvas dimensions</li>
            <li>import a background image from any device</li>
            <li>basic drawing tools: brush thickness, color, eraser</li>
            <li>zooming and scrolling inside canvas</li>
            <li>export drawing in PNG/JPEG format</li>
            <li>collaborative work via shareable link</li>
        </ul>
        </p>

        <h4>Android - TO EDIT</h4>
        <p>
            On a android side we developed a simple application using a "hybrid" approach,
            meaning that we create the user interface using HTML5, CSS3 and Javascript,
            which are interpreted inside an <i>WebView</i> component of the Android OS.
            This application will allow the user to connect to a session by scanning a QR code generated by APIx.
            Besides, it will provide handy controls such as color choosing,
            uploading a photo directly from the android device and brush thickness.
        </p>
    </section>


    <section id="">
        <h2>Application arhitecture - TO EDIT</h2>
        <br>
        <img src="./images/arhitectura.PNG" alt="Diagrama arhitecturală"/>
        <p class="imagetext">Fig. 1 - Application arhitecture diagram</p>

        <h2> The workflow of the application</h2>
        <p>
            Upon entering on the website the user will be prompted with a dialog to set up the canvas suited for his
            needs:
            <ul>
                <li>width and height of the canvas</li>
                <li><i class="material-icons">image</i> - button to upload an image background</li>
            </ul>
            <img src="./images/Fig2.PNG" alt="Initial settings dialog for the user to enter in order to continue"/>
            <p class="imagetext">Fig. 2 - Initial settings dialog</p>
        <p>
                Before preceding to the next step, the user may be prompted with another dialog,
                in case the connection with the server could not be established.<br>
                <img src="images/Fig3.PNG" alt=" Network error dialog image"/>
                <p class="imagetext">Fig. 3 - Network error dialog</p>

        <p>
            After submitting the initial settings he will be prompted to the actual working space: the canvas with the
            desired dimensions
            where he will observe various functionalities right next to the actual canvas:
            <ul>
            <li><i class="material-icons icon">content_cut</i> - eraser</li>
            <li><i class="material-icons icon">palette</i> - changing color input</li>
            <li><i class="material-icons icon">line_weight</i> - change brush thickness</li>
            <li><i class="material-icons icon">zoom_in</i> - enable zoom and scrolling inside canvas</li>
            </ul>
        <img src="images/Fig4.PNG" alt="Main page - the actual working space"/>
        <p class="imagetext">Fig. 4 - Actual working space</p>
        </p>
        <p>
            After the user got accustomed to drawing on the canvas and using all provided features,
            he has several options left. The options are revealed by pressing the <i class="material-icons">menu</i> icon
            in the top-left corner of the page and they consist of:
            <ul>
                <li><i class="material-icons icon">file_download</i>PNG - to export drawing in PNG format</li>
                <li><i class="material-icons icon">file_download</i>JPEG - to export drawing in JPEG format</li>
                <li><i class="material-icons icon">group_add</i> - to generate a shareable link to be sent to another drawing partner</li>
                <li><i class="material-icons icon">refresh</i> - to start a new, fresh session of drawing</li>
            </ul>

        <img src="images/Fig5.PNG" alt="Side menu for different features"/>
        <p class="imagetext">Fig. 5 - Side menu for different features</p>
        <h3> Android companion - TO EDIT</h3>
        The android companion is a simple-to-use app providing basic functionalities, enabling the device to be used as
        a pointer for APIx. The application starts with a screen with a single button, which, when pressed, will open
        the camera (using HTML5 <i>input</i> tag) in order to scan the QR code generated by a session of the web
        application. If the QR code is valid, the application will then display the main page, which contains buttons
        for turning the pointer on and off, changing the color with which we are drawing, changing the brush thickness
        and taking and uploading a photo from the device to be used as canvas background. While initially we will offer
        support only for portrait orientation, later on we might introduce the ability to use the device as an eraser
        for the drawings when in landscape orientation.
    </section>
    <div>
        <div class="android-page1">
            <img src="./images/android-homepage2.jpg" alt="Home page Page"/>
            <p class="imagetext">Fig. 6 - Android Landing Page </p>
        </div>
        <div class="android-page2">
            <img src="./images/android-homepage.jpg" alt="Home page Page"/>
            <p class="imagetext">Fig. 7 - Android Mainpage </p>
        </div>
    </div>

    <section id="file-headers">

        <h2>Technologies</h2>
            <h3>Client Side</h3>
        <p>
            To create APix we used <i>HTML5</i>, <i>CSS3</i> and <i>JavaScript</i> for the frontend part but also
            some Material Design icons and suggestions for a pleasant UI. The project has been created without any external libraries
            for javascript and for that reason, HTML5 features & pure javascript have been used to obtain different desired effects.
        </p>
        <div>
            <h4> The HTML5 canvas element</h4>
            The <i>canvas</i> element from HTML5 has been used repeatedly as the main focus of this project
            was to be able to draw in a browser. We used 3 canvases: <i>background_canvas</i>, <i>drawable_canvas</i> and <i>visor_canvas</i>.
            The main point from this layering was to separate different meaning canvases:
            <ul>
            <li>the background_canvas - to store a image as background, which would not be changed</li>
            <li>the drawable_canvas - the canvas on which we actually draw and needed to be updated regularly</li>
            <li>the visor_canvas - the view to the first 2 canvases, taking into account the scrolling and the zoom used by the user</li>
            </ul>

            <p>
                We focused on providing a reliable and stable way of providing our services on all devices,
                so that, for example you could edit a 1050×1500 px photo on a smart phone or on a desktop computer.
                A versatile and responsive application.
            </p>

            <h4> First steps into javascript</h4>
            Regarding <i>javascript</i>, we invested a LOT of work into it as we needed to use only <i>pure javascript</i>.
            Because of this we first implemented first basic functions: color choice, line thickness and upload of image background
            but soon after things got much more complex.

            <h4> Understanding javascript</h4>
            Javascript is an event-based language, meaning you active something when an event is fired. In the beginning we
            made rookies mistakes of assuming that our code will work sequentially, which made debugging it much harder but soon
            after we got accustomed to it.


            <h4> Hardcore javascript</h4>
            Later on we tackled much bigger issues of providing a reliable zoom effect and scroll effect. It's safe to say that
            to create from scratch a reliable zoom functionality proved to be much harder than anticipated: we had to understand
            how to emulate this effect, because the canvas element does not provide it, so we had to redraw the whole picture
            based on the scroll of the mouse wheel. As a later improvement, the zoom effect was updated, to take into account
            the position of the mouse in order to zoom in a specific area where the mouse was pointing.


            <h4> Javascript + networking</h4>
            Having a real time connection with the server meant that if we wanted to deliver a pleasant user experience
            we had to improve performance, because at a point things were snail speed slow. The main reason was because
            we were redrawing everything at 30fps -- which even on local machine was causing the gpu to spike. So we solved
            this issue by adding caches: whenever anything changed, we would re-render that thing. Our inspiration came
            from working with javascript, an event-based language. Soon after that, we were pleased with the results.


        <h3>Server Side - TO EDIT </h3>
        <p>
            We will decide later upon the technology to be used for the backend to better fit our needs.
        </p>
            <h4>Development method</h4>
            <p>
                For the development process we used <i>GitHub</i> to track down progress and fix bugs that appeared at some point.
                For new features we will create new branches which, after finishing the implementation, will
                be added to the master branch.
                Also, when trying to implement new features we usually created a new branch for further research and not to
                stop the development the project.
            </p>
        </div>


        <h3>Task distribution</h3>

        <p>
            The following list is an overview one. Both of us provided each other feedback and solutions,
            or actually worked on the others part in order to create a better application. We believe that
            a good product comes from great team-work and hard-work and we hope we delivered!
        </p>
        <ul>
        <li> Cristian Huma - mostly client-side
            <ul>
                <li>Frontend HTML5+CSS</li>
                <li>Backend Javascript</li>
                <li>Documentation and demo</li>
            </ul>
        </li>
        </ul>

        <ul>
        <li> Corodescu Alin Andrei - mostly backend-side + android
            <ul>
                <li>Frontend HTML5+CSS</li>
                <li>Backend Javascript + Python + Deployment</li>
                <li>Integration Android</li>
                <li>Documentation and demo</li>
            </ul>
        </li>
        </ul>


        <h2>Bibliography</h2>
        <ul>
            <li><a href="https://material.io/icons/">https://material.io/icons/</a></li>
            <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial">
                https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial
            </a></li>
            <li><a href="https://www.w3schools.com/html/html5_canvas.asp/">https://www.w3schools.com/html/html5_canvas.asp</a></li>
        </ul>

    </section>

</article>
</body>
</html>
